{% extends "bootstrap.html" %}
{% block container_content %}
<div class="row">
    <div class="span9">
        <h1>Dashboard</h1>
        <h2>Goals</h2>
        {% if goals %}
        <ol>
            {% for goal in goals %}
            <li>{{ goal.name }} until {{ goal.expires }}</li>
            {% endfor %}
        </ol>
        {% endif %}

        <div id="goals-map">

        </div>

    </div>
    <div class="span3">
        <h3>Feed</h3>
        <ul class="thumbnails">
            <li class="span3">
            <h4>Example title</h4>
            </li>
        </ul>

    </div>
</div>
{% endblock %}
{% block additional_javascript %}
<script src="https://maps.googleapis.com/maps/api/js?v=3.11&sensor=false"></script>
<script src="/static/js/goals.js"></script>
<script>
  $(document).ready(function () {
    var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
    var mapOptions = {
      zoom: 12,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map(document.getElementById('goals-map'), mapOptions);
    {% for goal in goals %}
    var location = new google.maps.LatLng({{ goal.center }});
    var marker = new google.maps.Marker({
        position: location,
        title: '{{ goal.name }}',
        map: map
    });
    var circle = new google.maps.Circle({
        center: location,
        radius: {{ goal.radius }},
        strokeColor: '{{ goal.map_color }}',
        strokeOpacity: 0.8,
        strokeWeight: 2,
        fillColor: '{{ goal.map_color }}',
        fillOpacity: 0.35,
        map: map
    });
    {% endfor %}

    map.setCenter(location);
  });


</script>
{% endblock %}
